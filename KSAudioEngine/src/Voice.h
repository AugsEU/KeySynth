// ============================================================================
// Logic for voices and voice allocations
// ----------------------------------------------------------------------------
// ============================================================================
// Include
// ============================================================================
#include <Arduino.h>

#ifndef HEADER_H
#define HEADER_H
// ============================================================================
// Public constants
// ============================================================================
constexpr uint8_t INVALID_NOTE = 0xFF;
constexpr uint8_t VOICE_POLYPHONY = 8;

// ============================================================================
// Voice
// ============================================================================
struct Voice
{
    uint8_t mNoteNum = INVALID_NOTE;
    float_t mPhaseShift = 0.0f;

    bool CanBeAllocated();
};

// ============================================================================
// Public functions
// ============================================================================
void BeginVoice(uint8_t note);
void ReleaseVoice(uint8_t note);
void StopVoice(uint8_t note);

// ============================================================================
// Public globals
// ============================================================================
extern Voice gVoices[VOICE_POLYPHONY];

#endif //HEADER_H